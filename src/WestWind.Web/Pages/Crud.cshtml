@page
@model MyApp.Namespace.CrudModel
@{
}
<h4>Rolling Stock Maintenance</h4>
<p>ButtonPressed=<span>@Model.ButtonPressed</span></p>

@if(!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <p style="color:red; font-weight: bold;">@Model.ErrorMessage</p>
}

@if(!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <p style="color:green; font-weight: bold;">@Model.SuccessMessage</p>
}

<form method="post">
    @if(string.IsNullOrEmpty(Model.RollingStock.ReportingMark) || string.IsNullOrEmpty(Model.RollingStock.Owner))
    {
        <button type="submit" formaction="/Crud" name="buttonPressed" value="Add">Add</button>
        <button type="submit" disabled>Update</button>
        <button type="submit" disabled>Delete</button>
    }
    else
    {
        <button type="submit" disabled>Add</button>
        <button type="submit" formaction="/Crud" name="buttonPressed" value="Update">Update</button>
        <button type="submit" onclick="return confirm('Are you sure you want to delete this');" 
            formaction="/Crud" name="buttonPressed" value="CrudDelete">Delete</button>
    }
    <input type="hidden" name="partialRecordingMark" value="@Model.PartialRecordingMark">
    <input type="hidden" name="selectedRailCarTypeId" value="@Model.SelectedRailCarTypeId">
    <button type="submit" formaction="/Crud" title="Back to Query Page" name="buttonPressed" value="CrudCancel">Cancel</button>

@{
    if(Model.RollingStock != null)
    {
        if(string.IsNullOrEmpty(Model.RollingStock.ReportingMark) || string.IsNullOrEmpty(Model.RollingStock.Owner))
        {
            <label>Reporting Mark
            <input type="text" name="reportingMark" value="@Model.RollingStock.ReportingMark" />
            </label>
        }
        else
        {
            <label>Reporting Mark readonly
            <input type="text" readonly name="reportingMark" value="@Model.RollingStock.ReportingMark" />
            </label>
        }

        <label>Owner
            <input type="text"  name="owner" value="@Model.RollingStock.Owner" />
        </label>
        <label>LightWeight
            <input type="number" name="lightWeight" value="@Model.RollingStock.LightWeight" />
        </label>
        <label>LoadLimit
            <input type="number" name="loadLimit" value="@Model.RollingStock.LoadLimit" />
        </label>
        <label>Capacity
            <input type="number" name="capacity" value="@Model.RollingStock.Capacity" />
        </label>
        <label>Rail Car Type
            <input type="number" name="railCarTypeId" value="@Model.RollingStock.RailCarTypeId" />
        </label>
        <label>Year Built
            <input type="number" name="yearBuilt" value="@Model.RollingStock.YearBuilt" />
        </label>
        <label>In Service
            <input type="checkbox" name="inService" checked="@Model.RollingStock.InService" />
        </label>
        <label>Notes
            <textarea name="notes">@Model.RollingStock.Notes</textarea>
        </label>
    }
}
</form>